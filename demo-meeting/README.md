# Demo Meeting Backend

ğŸ¥ ä¸€ä¸ªåŸºäº Spring Boot 3 + Netty + WebRTC çš„ç°ä»£åŒ–è§†é¢‘ä¼šè®®ç³»ç»Ÿåç«¯

## Task

- [x] WebSocket ä¿¡ä»¤æœåŠ¡å™¨
- [x] ä¼šè®®å®¤ç®¡ç†
- [x] ç”¨æˆ·è®¤è¯ä¸æˆæƒ
- [ ] æ¶ˆæ¯é˜Ÿåˆ—é›†æˆä¼˜åŒ–
- [ ] ä¼šè®®å½•åˆ¶åŠŸèƒ½
- [ ] è´Ÿè½½å‡è¡¡æ”¯æŒ

## ğŸš€ é¡¹ç›®ç®€ä»‹

Demo Meeting Backend æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è§†é¢‘ä¼šè®®ç³»ç»Ÿåç«¯æœåŠ¡ï¼Œæä¾› WebRTC ä¿¡ä»¤æœåŠ¡ã€ä¼šè®®ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€å®æ—¶æ¶ˆæ¯æ¨é€ç­‰åŠŸèƒ½ã€‚é¡¹ç›®é‡‡ç”¨å¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼Œå…·æœ‰é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€æ˜“æ‰©å±•çš„ç‰¹ç‚¹ã€‚

### ä¸»è¦ç‰¹æ€§

- âœ… **WebSocket ä¿¡ä»¤æœåŠ¡**ï¼šåŸºäº Netty çš„é«˜æ€§èƒ½ WebSocket æœåŠ¡å™¨
- âœ… **ä¼šè®®ç®¡ç†**ï¼šåˆ›å»ºä¼šè®®ã€åŠ å…¥ä¼šè®®ã€ä¼šè®®æˆå‘˜ç®¡ç†
- âœ… **ç”¨æˆ·è®¤è¯**ï¼šJWT Token è®¤è¯æœºåˆ¶
- âœ… **å®æ—¶æ¶ˆæ¯**ï¼šåŸºäº WebSocket çš„å®æ—¶æ¶ˆæ¯æ¨é€
- âœ… **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šRocketMQ å¼‚æ­¥æ¶ˆæ¯å¤„ç†
- âœ… **å¯¹è±¡å­˜å‚¨**ï¼šMinIO æ–‡ä»¶å­˜å‚¨æœåŠ¡
- âœ… **API æ–‡æ¡£**ï¼šKnife4j (Swagger) è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£
- âœ… **è¿æ¥ç®¡ç†**ï¼šChannel ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œè‡ªåŠ¨æ¸…ç†

## ğŸ›  æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

- **Spring Boot 3.4.5** - ä¼ä¸šçº§åº”ç”¨å¼€å‘æ¡†æ¶
- **Spring Cloud 2024.0.2** - å¾®æœåŠ¡ç”Ÿæ€
- **Spring Cloud Alibaba 2023.0.1.0** - é˜¿é‡Œå·´å·´å¾®æœåŠ¡ç»„ä»¶
- **Netty** - é«˜æ€§èƒ½ç½‘ç»œé€šä¿¡æ¡†æ¶

### æ•°æ®è®¿é—®

- **MyBatis-Plus 3.5.12** - å¢å¼ºçš„ MyBatis æŒä¹…å±‚æ¡†æ¶
- **PostgreSQL 42.7.2** - å…³ç³»å‹æ•°æ®åº“
- **Redis** - é«˜æ€§èƒ½ç¼“å­˜å’Œä¼šè¯å­˜å‚¨

### æ¶ˆæ¯é˜Ÿåˆ—

- **Apache RocketMQ 2.3.0** - åˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶

### å¯¹è±¡å­˜å‚¨

- **MinIO** - å¼€æºå¯¹è±¡å­˜å‚¨æœåŠ¡

### å·¥å…·ç±»åº“

- **Hutool 5.8.26** - Java å·¥å…·ç±»åº“
- **Guava 32.0.1** - Google æ ¸å¿ƒ Java åº“
- **Lombok** - ç®€åŒ– Java ä»£ç 

### API æ–‡æ¡£

- **Knife4j 4.4.0** - Swagger å¢å¼º UI
- **SpringDoc 2.8.13** - OpenAPI 3.0 è§„èŒƒ

## ğŸ— æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Client Layer                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Web App   â”‚  â”‚  Mobile App â”‚  â”‚   Desktop App    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                â”‚
             â–¼                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   WebSocket (Netty)    â”‚      â”‚    HTTP REST API       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Token Validation â”‚  â”‚      â”‚  â”‚  Authentication  â”‚  â”‚
â”‚  â”‚ Heart Beat       â”‚  â”‚      â”‚  â”‚  Authorization   â”‚  â”‚
â”‚  â”‚ Message Handler  â”‚  â”‚      â”‚  â”‚  CORS Config     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                â”‚
             â–¼                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Service Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Meeting    â”‚  â”‚    User     â”‚  â”‚     Message    â”‚ â”‚
â”‚  â”‚   Service    â”‚  â”‚   Service   â”‚  â”‚     Service    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                â”‚
             â–¼                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Data Access Layer                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  PostgreSQL  â”‚  â”‚    Redis    â”‚  â”‚     MinIO      â”‚ â”‚
â”‚  â”‚  (MyBatis+)  â”‚  â”‚   (Cache)   â”‚  â”‚  (Storage)     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Message Queue Layer                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              RocketMQ                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚  NameServer  â”‚  â”‚       Broker             â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### WebSocket æ¶ˆæ¯æµç¨‹

```
Client                  Netty Server              Service Layer
  â”‚                           â”‚                         â”‚
  â”‚â”€â”€â‘  WebSocket Connectâ”€â”€â”€â”€â”€>â”‚                         â”‚
  â”‚                           â”‚â”€â”€â‘¡ Token Validationâ”€â”€â”€â”€>â”‚
  â”‚                           â”‚<â”€â”€â‘¢ Validation Resultâ”€â”€â”€â”‚
  â”‚<â”€â”€â‘£ Connection Successâ”€â”€â”€â”€â”‚                         â”‚
  â”‚                           â”‚â”€â”€â‘¤ Register Channelâ”€â”€â”€â”€>â”‚
  â”‚                           â”‚                         â”‚
  â”‚â”€â”€â‘¥ Join Meeting Requestâ”€â”€>â”‚                         â”‚
  â”‚                           â”‚â”€â”€â‘¦ Business Logicâ”€â”€â”€â”€â”€â”€>â”‚
  â”‚                           â”‚<â”€â”€â‘§ Add to Roomâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                           â”‚                         â”‚
  â”‚â”€â”€â‘¨ Send Messageâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚
  â”‚                           â”‚â”€â”€â‘© Route Messageâ”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚<â”€â”€â‘ª Broadcast Messageâ”€â”€â”€â”€â”€â”‚<â”€â”€â‘« Target Usersâ”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                           â”‚                         â”‚
  â”‚â”€â”€â‘¬ Heartbeat Pingâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚
  â”‚<â”€â”€â‘­ Heartbeat Pongâ”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
  â”‚                           â”‚                         â”‚
  â”‚â”€â”€â‘® Disconnectâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚
  â”‚                           â”‚â”€â”€â‘¯ Cleanup Resourcesâ”€â”€â”€>â”‚
```

### Channel ç”Ÿå‘½å‘¨æœŸç®¡ç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Channel Lifecycle                         â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Connect  â”‚â”€â”€â”€â”€â”€>â”‚  Active  â”‚â”€â”€â”€â”€â”€>â”‚   Inactive   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                  â”‚                    â”‚         â”‚
â”‚       â–¼                  â–¼                    â–¼         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          ChannelContextUtils                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  USER_CONTEXT_MAP (userId -> Channel)     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - addContext()                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - closeContext()                         â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  MEETING_ROOM_CONTEXT_MAP                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  (meetingNo -> ChannelGroup)              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - addMeetingRoom()                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - removeFromMeetingRoom()                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - removeChannelFromAllMeetings()         â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ç›®å½•ç»“æ„

```
demo-meeting/
â”œâ”€â”€ !docker/                     # Docker ç›¸å…³é…ç½®å’Œæ•°æ®
â”‚   â”œâ”€â”€ config/                 # æœåŠ¡é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ broker.conf        # RocketMQ Broker é…ç½®
â”‚   â”‚   â””â”€â”€ redis.conf         # Redis é…ç½®
â”‚   â””â”€â”€ data/                   # æŒä¹…åŒ–æ•°æ®ç›®å½•
â”‚       â”œâ”€â”€ broker/            # RocketMQ æ•°æ®
â”‚       â”œâ”€â”€ minio/             # MinIO æ•°æ®
â”‚       â”œâ”€â”€ postgres/          # PostgreSQL æ•°æ®
â”‚       â””â”€â”€ redis/             # Redis æ•°æ®
â”‚
â”œâ”€â”€ docs/                        # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ sql/                    # SQL è„šæœ¬
â”‚       â””â”€â”€ table.sql          # æ•°æ®åº“è¡¨ç»“æ„
â”‚
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ java/
â”‚       â”‚   â””â”€â”€ io/github/hoooosi/meeting/
â”‚       â”‚       â”œâ”€â”€ App.java                    # åº”ç”¨å¯åŠ¨ç±»
â”‚       â”‚       â”‚
â”‚       â”‚       â”œâ”€â”€ aspect/                     # AOP åˆ‡é¢
â”‚       â”‚       â”‚   â””â”€â”€ AuthInterceptor.java   # è®¤è¯æ‹¦æˆªå™¨
â”‚       â”‚       â”‚
â”‚       â”‚       â”œâ”€â”€ common/                     # å…¬å…±æ¨¡å—
â”‚       â”‚       â”‚   â”œâ”€â”€ constants/             # å¸¸é‡å®šä¹‰
â”‚       â”‚       â”‚   â”‚   â”œâ”€â”€ MessageTypes.java         # æ¶ˆæ¯ç±»å‹
â”‚       â”‚       â”‚   â”‚   â””â”€â”€ MessageTargetTypes.java   # æ¶ˆæ¯ç›®æ ‡ç±»å‹
â”‚       â”‚       â”‚   â”œâ”€â”€ exception/             # å¼‚å¸¸å¤„ç†
â”‚       â”‚       â”‚   â”‚   â”œâ”€â”€ ErrorCode.java            # é”™è¯¯ç 
â”‚       â”‚       â”‚   â”‚   â”œâ”€â”€ BusinessException.java    # ä¸šåŠ¡å¼‚å¸¸
â”‚       â”‚       â”‚   â”‚   â””â”€â”€ GlobalExceptionHandler.java
â”‚       â”‚       â”‚   â”œâ”€â”€ model/                 # æ•°æ®æ¨¡å‹
â”‚       â”‚       â”‚   â”‚   â”œâ”€â”€ dto/              # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚       â”‚       â”‚   â”‚   â”œâ”€â”€ entity/           # å®ä½“ç±»
â”‚       â”‚       â”‚   â”‚   â””â”€â”€ vo/               # è§†å›¾å¯¹è±¡
â”‚       â”‚       â”‚   â””â”€â”€ utils/                 # å·¥å…·ç±»
â”‚       â”‚       â”‚       â”œâ”€â”€ ChannelUtils.java         # Channel å·¥å…·
â”‚       â”‚       â”‚       â”œâ”€â”€ RedisUtils.java           # Redis å·¥å…·
â”‚       â”‚       â”‚       â”œâ”€â”€ RocketMQUtils.java        # RocketMQ å·¥å…·
â”‚       â”‚       â”‚       â”œâ”€â”€ TokenUtils.java           # Token å·¥å…·
â”‚       â”‚       â”‚       â””â”€â”€ ThrowUtils.java           # å¼‚å¸¸æŠ›å‡ºå·¥å…·
â”‚       â”‚       â”‚
â”‚       â”‚       â”œâ”€â”€ config/                     # é…ç½®ç±»
â”‚       â”‚       â”‚   â”œâ”€â”€ CorsConfig.java        # è·¨åŸŸé…ç½®
â”‚       â”‚       â”‚   â”œâ”€â”€ MinioConfig.java       # MinIO é…ç½®
â”‚       â”‚       â”‚   â””â”€â”€ RedisConfig.java       # Redis é…ç½®
â”‚       â”‚       â”‚
â”‚       â”‚       â”œâ”€â”€ controller/                 # æ§åˆ¶å™¨å±‚
â”‚       â”‚       â”‚   â”œâ”€â”€ UserController.java    # ç”¨æˆ·æ¥å£
â”‚       â”‚       â”‚   â”œâ”€â”€ MeetingController.java # ä¼šè®®æ¥å£
â”‚       â”‚       â”‚   â””â”€â”€ MessageController.java # æ¶ˆæ¯æ¥å£
â”‚       â”‚       â”‚
â”‚       â”‚       â”œâ”€â”€ mapper/                     # æ•°æ®è®¿é—®å±‚
â”‚       â”‚       â”‚   â”œâ”€â”€ UserMapper.java
â”‚       â”‚       â”‚   â”œâ”€â”€ MeetingMapper.java
â”‚       â”‚       â”‚   â””â”€â”€ MeetingMemberMapper.java
â”‚       â”‚       â”‚
â”‚       â”‚       â”œâ”€â”€ service/                    # æœåŠ¡å±‚
â”‚       â”‚       â”‚   â”œâ”€â”€ UserService.java
â”‚       â”‚       â”‚   â”œâ”€â”€ MeetingService.java
â”‚       â”‚       â”‚   â”œâ”€â”€ MeetingMemberService.java
â”‚       â”‚       â”‚   â””â”€â”€ impl/                  # æœåŠ¡å®ç°
â”‚       â”‚       â”‚       â”œâ”€â”€ UserServiceImpl.java
â”‚       â”‚       â”‚       â”œâ”€â”€ MeetingServiceImpl.java
â”‚       â”‚       â”‚       â””â”€â”€ MeetingMemberServiceImpl.java
â”‚       â”‚       â”‚
â”‚       â”‚       â””â”€â”€ websocket/                  # WebSocket æ¨¡å—
â”‚       â”‚           â”œâ”€â”€ ChannelContextUtils.java       # Channel ä¸Šä¸‹æ–‡ç®¡ç†
â”‚       â”‚           â”œâ”€â”€ message/               # æ¶ˆæ¯å®šä¹‰
â”‚       â”‚           â”‚   â””â”€â”€ MessageSendDTO.java
â”‚       â”‚           â””â”€â”€ netty/                 # Netty å¤„ç†å™¨
â”‚       â”‚               â”œâ”€â”€ NettyWebSocketStarter.java    # Netty å¯åŠ¨å™¨
â”‚       â”‚               â”œâ”€â”€ WebSocketHandler.java         # WebSocket å¤„ç†å™¨
â”‚       â”‚               â”œâ”€â”€ TokenValidationHandler.java   # Token éªŒè¯
â”‚       â”‚               â””â”€â”€ HeartHandler.java             # å¿ƒè·³å¤„ç†
â”‚       â”‚
â”‚       â””â”€â”€ resources/
â”‚           â””â”€â”€ application.yml         # åº”ç”¨é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ docker-compose.yml              # Docker Compose é…ç½®
â”œâ”€â”€ pom.xml                         # Maven é¡¹ç›®é…ç½®
â””â”€â”€ README.md                       # é¡¹ç›®è¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **JDK 17+**
- **Maven 3.6+**
- **Docker & Docker Compose** (æ¨è)

### ä½¿ç”¨ Docker Compose å¯åŠ¨

é¡¹ç›®æä¾›äº†å®Œæ•´çš„ Docker Compose é…ç½®ï¼Œå¯ä¸€é”®å¯åŠ¨æ‰€æœ‰ä¾èµ–æœåŠ¡ï¼š

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down
```

### æœåŠ¡ç«¯å£

Docker Compose å¯åŠ¨åï¼Œä»¥ä¸‹æœåŠ¡å°†å¯ç”¨ï¼š

| æœåŠ¡                | ç«¯å£                | è¯´æ˜                |
| ------------------- | ------------------- | ------------------- |
| PostgreSQL          | 5432                | å…³ç³»å‹æ•°æ®åº“        |
| Redis               | 6379                | ç¼“å­˜æœåŠ¡            |
| MinIO               | 9000                | å¯¹è±¡å­˜å‚¨ API        |
| MinIO Console       | 9001                | MinIO ç®¡ç†æ§åˆ¶å°    |
| RocketMQ NameServer | 9876                | æ¶ˆæ¯é˜Ÿåˆ—å‘½åæœåŠ¡    |
| RocketMQ Broker     | 10909, 10911, 10912 | æ¶ˆæ¯é˜Ÿåˆ—ä»£ç†æœåŠ¡    |
| RocketMQ Dashboard  | 8180                | RocketMQ ç®¡ç†æ§åˆ¶å° |

### åˆå§‹åŒ–æ•°æ®åº“

```bash
# è¿æ¥åˆ° PostgreSQL
psql -h localhost -p 5432 -U postgres

# åˆ›å»ºæ•°æ®åº“
CREATE DATABASE meeting;

# æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
\c meeting
\i docs/sql/table.sql
```

### é…ç½®æ–‡ä»¶

ç¼–è¾‘ `src/main/resources/application.yml`ï¼š

```yaml
server:
  port: 80

spring:
  datasource:
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://localhost:5432/meeting
    username: postgres
    password: 123456

  data:
    redis:
      host: localhost
      port: 6379
      password: redis
      timeout: 5000

rocketmq:
  name-server: localhost:9876
  producer:
    group: meeting-producer-group
    send-message-timeout: 3000
    retry-times-when-send-failed: 2

minio:
  endpoint: http://localhost:9000
  access-key: minio
  secret-key: 12345678
  bucket-name: picture
```

### ç¼–è¯‘å’Œè¿è¡Œ

```bash
# ä½¿ç”¨ Maven ç¼–è¯‘
mvn clean package -DskipTests

# è¿è¡Œåº”ç”¨
java -jar target/meeting-1.0-SNAPSHOT.jar

# æˆ–ä½¿ç”¨ Maven ç›´æ¥è¿è¡Œ
mvn spring-boot:run
```

åº”ç”¨å°†åœ¨ `http://localhost:80` å¯åŠ¨

### è®¿é—® API æ–‡æ¡£

å¯åŠ¨åº”ç”¨åï¼Œè®¿é—® Knife4j API æ–‡æ¡£ï¼š

```
http://localhost:80/doc.html
```
