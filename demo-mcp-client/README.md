# MCP Multi-Server Client

ä¸€ä¸ªç”¨äºå­¦ä¹ çš„ Model Context Protocol (MCP) å¤šæœåŠ¡å™¨å®¢æˆ·ç«¯ï¼Œæ”¯æŒè¿æ¥å¤šä¸ª MCP æœåŠ¡å™¨å¹¶é€šè¿‡ OpenAI å…¼å®¹ API è¿›è¡Œå¯¹è¯ã€‚

## Task

- [] æ·»åŠ  STDIO ä¹‹å¤–çš„ä¼ è¾“æ–¹å¼æ”¯æŒ
- [] ä¼˜åŒ–æ¶æ„

## ğŸ¯ é¡¹ç›®ç®€ä»‹

MCP Multi-Server Client æ˜¯ä¸€ä¸ª TypeScript å®ç°çš„ MCP å®¢æˆ·ç«¯ï¼Œå…è®¸æ‚¨ï¼š

- ğŸ“¡ åŒæ—¶è¿æ¥å¤šä¸ª MCP æœåŠ¡å™¨
- ğŸ¤– é›†æˆ OpenAI APIï¼ˆæˆ–å…¼å®¹æœåŠ¡å¦‚ Geminiï¼‰è¿›è¡Œæ™ºèƒ½å¯¹è¯
- ğŸ› ï¸ èšåˆå¤šä¸ªæœåŠ¡å™¨çš„å·¥å…·ï¼Œè‡ªåŠ¨è·¯ç”±å·¥å…·è°ƒç”¨
- ğŸ’¬ æ”¯æŒæµå¼å’Œéæµå¼å¯¹è¯æ¨¡å¼
- âš¡ å¼‚æ­¥å¹¶å‘å¤„ç†ï¼Œé«˜æ€§èƒ½è¿æ¥ç®¡ç†

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. å¤šæœåŠ¡å™¨ç®¡ç†

- âœ… æ”¯æŒåŒæ—¶è¿æ¥å¤šä¸ª MCP æœåŠ¡å™¨
- âœ… è‡ªåŠ¨èšåˆæ‰€æœ‰æœåŠ¡å™¨çš„å·¥å…·
- âœ… æ™ºèƒ½å·¥å…·è·¯ç”±ï¼ˆè‡ªåŠ¨è¯†åˆ«å·¥å…·æ‰€å±æœåŠ¡å™¨ï¼‰
- âœ… ç»Ÿä¸€çš„å·¥å…·è°ƒç”¨æ¥å£

### 2. AI å¯¹è¯é›†æˆ

- âœ… é›†æˆ OpenAI APIï¼ˆæ”¯æŒ Geminiã€DeepSeek ç­‰å…¼å®¹æœåŠ¡ï¼‰
- âœ… æ”¯æŒæµå¼å“åº”ï¼ˆå®æ—¶è¾“å‡ºï¼‰
- âœ… è‡ªåŠ¨å·¥å…·è°ƒç”¨å’Œç»“æœå¤„ç†
- âœ… å¯¹è¯å†å²ç®¡ç†

### 3. çµæ´»é…ç½®

- âœ… JSON é…ç½®æ–‡ä»¶ç®¡ç†æœåŠ¡å™¨
- âœ… ç¯å¢ƒå˜é‡æ”¯æŒ
- âœ… å¯è‡ªå®šä¹‰ AI æ¨¡å‹å’Œ API ç«¯ç‚¹

### 4. å‹å¥½äº¤äº’

- âœ… å‘½ä»¤è¡Œäº¤äº’å¼å¯¹è¯
- âœ… è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
- âœ… é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·äº¤äº’å±‚                            â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              CLI (cli.ts)                            â”‚    â”‚
â”‚  â”‚  - ç”¨æˆ·è¾“å…¥                                           â”‚    â”‚
â”‚  â”‚  - æµå¼è¾“å‡º                                           â”‚    â”‚
â”‚  â”‚  - äº¤äº’å¾ªç¯                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       åº”ç”¨å±‚ (app.ts)                        â”‚
â”‚  - åˆå§‹åŒ– MCPManager                                         â”‚
â”‚  - åˆ›å»º Agent                                                â”‚
â”‚  - å¯åŠ¨å¯¹è¯å¾ªç¯                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ ¸å¿ƒä¸šåŠ¡å±‚                                 â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Agent (agent.ts)                        â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  - å¯¹è¯ç®¡ç†                                    â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - OpenAI API è°ƒç”¨                            â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - å·¥å…·è°ƒç”¨åè°ƒ                               â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - æµå¼å“åº”å¤„ç†                               â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                         â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚         MCPManager (mcp-manager.ts)               â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”‚
â”‚  â”‚  â”‚  - å¤šæœåŠ¡å™¨è¿æ¥ç®¡ç†                       â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  - å·¥å…·èšåˆ                               â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  - å·¥å…·è·¯ç”±                               â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  - æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†                     â”‚    â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MCP è¿æ¥å±‚                              â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   MCPServerConnection (mcp-server-connection.ts)    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  - å•æœåŠ¡å™¨è¿æ¥                               â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - STDIO ä¼ è¾“                                 â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - å·¥å…·åˆ—è¡¨/è°ƒç”¨                              â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¤–éƒ¨æœåŠ¡å±‚                              â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ MCP Server 1 â”‚  â”‚ MCP Server 2 â”‚  â”‚ MCP Server N â”‚      â”‚
â”‚  â”‚  (Python)    â”‚  â”‚  (Node.js)   â”‚  â”‚    (...)     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  OpenAI Compatible API                            â”‚       â”‚
â”‚  â”‚  (OpenAI / Gemini / DeepSeek / ...)              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å·¥å…·æµç¨‹å›¾

```
ç”¨æˆ·è¾“å…¥
   â”‚
   â–¼
Agent.chatStream()
   â”‚
   â”œâ”€â–º OpenAI API è°ƒç”¨
   â”‚      â”‚
   â”‚      â”œâ”€â–º è¿”å›æ–‡æœ¬å†…å®¹ â”€â”€â–º æµå¼è¾“å‡ºç»™ç”¨æˆ·
   â”‚      â”‚
   â”‚      â””â”€â–º è¿”å›å·¥å…·è°ƒç”¨è¯·æ±‚
   â”‚             â”‚
   â”‚             â–¼
   â”‚      Agent.executeToolCalls()
   â”‚             â”‚
   â”‚             â–¼
   â”‚      MCPManager.callTool(toolName, args)
   â”‚             â”‚
   â”‚             â”œâ”€â–º æŸ¥æ‰¾å·¥å…·æ‰€å±æœåŠ¡å™¨ï¼ˆtoolToServerMapï¼‰
   â”‚             â”‚
   â”‚             â–¼
   â”‚      MCPServerConnection.callTool()
   â”‚             â”‚
   â”‚             â–¼
   â”‚      MCP Server æ‰§è¡Œå·¥å…·
   â”‚             â”‚
   â”‚             â–¼
   â”‚      è¿”å›å·¥å…·ç»“æœ
   â”‚             â”‚
   â”‚             â–¼
   â”‚      æ·»åŠ åˆ°å¯¹è¯å†å²
   â”‚             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
å†æ¬¡è°ƒç”¨ OpenAI APIï¼ˆå¸¦å·¥å…·ç»“æœï¼‰
   â”‚
   â–¼
ç»§ç»­å¯¹è¯...
```

### æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ config.json  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é…ç½®åŠ è½½ (config-loader.ts)                               â”‚
â”‚  - loadMCPConfig()                                        â”‚
â”‚  - éªŒè¯é…ç½®                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MCPManager åˆå§‹åŒ–                                         â”‚
â”‚  1. è§£ææœåŠ¡å™¨é…ç½®                                        â”‚
â”‚  2. å¹¶å‘è¿æ¥æ‰€æœ‰æœåŠ¡å™¨                                    â”‚
â”‚  3. åŠ è½½æ‰€æœ‰å·¥å…·                                          â”‚
â”‚  4. æ„å»ºå·¥å…·è·¯ç”±æ˜ å°„                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent åˆ›å»º                                                â”‚
â”‚  - åˆå§‹åŒ– OpenAI å®¢æˆ·ç«¯                                   â”‚
â”‚  - è®¾ç½®æ¨¡å‹                                               â”‚
â”‚  - å‡†å¤‡å¯¹è¯å†å²                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¹è¯å¾ªç¯                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. ç”¨æˆ·è¾“å…¥ â”€â”€â–º å¯¹è¯å†å²                          â”‚  â”‚
â”‚  â”‚ 2. OpenAI API è°ƒç”¨ï¼ˆé™„å¸¦æ‰€æœ‰å¯ç”¨å·¥å…·ï¼‰            â”‚  â”‚
â”‚  â”‚ 3. å¤„ç†å“åº”ï¼š                                      â”‚  â”‚
â”‚  â”‚    â”œâ”€â–º æ–‡æœ¬å†…å®¹ â”€â”€â–º è¾“å‡ºç»™ç”¨æˆ·                   â”‚  â”‚
â”‚  â”‚    â””â”€â–º å·¥å…·è°ƒç”¨ â”€â”€â–º MCPManager â”€â”€â–º å¯¹è¯å†å²      â”‚  â”‚
â”‚  â”‚ 4. å¾ªç¯ç›´åˆ°æ— å·¥å…·è°ƒç”¨                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 18.0.0
- å¯ç”¨çš„ MCP æœåŠ¡å™¨ï¼ˆå¦‚ filesystemã€fetch ç­‰ï¼‰
- OpenAI API å¯†é’¥æˆ–å…¼å®¹æœåŠ¡

### å®‰è£…

```bash
# å®‰è£…ä¾èµ–
npm install
# æˆ–ä½¿ç”¨ bun
bun install
```

### é…ç½®

1. **åˆ›å»ºé…ç½®æ–‡ä»¶ `config.json`**

```json
{
  "servers": {
    "filesystem": {
      "type": "stdio",
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-filesystem",
        "/path/to/directory"
      ]
    },
    "fetch": {
      "type": "stdio",
      "command": "uvx",
      "args": ["mcp-server-fetch"]
    }
  }
}
```

2. **åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶ `.env`**

```env
OPENAI_BASE_URL=http://your-api-endpoint/v1
OPENAI_API_KEY=your-api-key
OPENAI_MODEL=gemini-2.5-flash-preview-05-20
```

### è¿è¡Œ

```bash
# å¯åŠ¨åº”ç”¨
npm start
# æˆ–ä½¿ç”¨ bun
bun run app.ts
```

### æµ‹è¯•

```bash
ğŸ‘¤ You: Test all the tools you have to see if they work

ğŸ¤– Assistant:    â³ Calling tool: get_current_time...
ğŸ”§ [time] Calling tool: get_current_time {"timezone":"America/New_York"}
   âœ“ Tool result: {
  "timezone": "America/New_York",
  "datetime": "2025-10-23T00:52:52-04:00",
  "day_of_week": "Thursday",
  "is_dst": true
}
====================================================================================================
   â³ Calling tool: convert_time...
ğŸ”§ [time] Calling tool: convert_time {"target_timezone":"Europe/London","time":"10:30","source_timezone":"America/New_York"}
   âœ“ Tool result: {
  "source": {
    "timezone": "America/New_York",
    "datetime": "2025-10-23T10:30:00-04:00",
    "day_of_week": "Thursday",
    "is_dst": true
  },
  "target": {
    "timezone": "Europe/London",
 ...
====================================================================================================
   â³ Calling tool: fetch...
ğŸ”§ [fetch] Calling tool: fetch {"url":"https://www.google.com"}
Warning: A working NPM installation was not found. The package will use Python-based article extraction.
Warning: node executable not found, reverting to pure-Python mode. Install Node.js v10 or newer to use Readability.js.
   âœ“ Tool result: Contents of https://www.google.com/:
Google

æœå°‹ åœ–ç‰‡ åœ°åœ– Play YouTube æ–°è Gmail é›²ç«¯ç¡¬ç¢Ÿ æ›´å¤š Â»

ç¶²é è¨˜éŒ„ | è¨­å®š | ç™»å…¥

Google é€éä»¥ä¸‹èªè¨€æä¾›: ç®€ä½“ä¸­æ–‡ English

å»£å‘Šé—œæ–¼ GoogleGoogle.com.hk

Â© 2025 - ç§éš±æ¬Šæ”¿ç­– - æ¢æ¬¾
====================================================================================================
All tools are working as expected!

*   `get_current_time`: This tool can fetch the current time for a specified timezone.
*   `convert_time`: This tool can convert a given time from one timezone to another.
*   `fetch`: This tool can fetch content from a given URL on the internet.


ğŸ‘¤ You:
```

## âš™ï¸ é…ç½®è¯´æ˜

### config.json ç»“æ„

```typescript
{
  "servers": {
    "server-name": {
      "type": "stdio",           // ä¼ è¾“ç±»å‹ï¼ˆç›®å‰ä»…æ”¯æŒ stdioï¼‰
      "command": "string",       // å¯åŠ¨å‘½ä»¤
      "args": ["string"],        // å‘½ä»¤å‚æ•°
      "env": {                   // å¯é€‰ï¼šç¯å¢ƒå˜é‡
        "KEY": "value"
      }
    }
  }
}
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
demo-mcp-client/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ mcp/                          # MCP æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mcp-manager.ts           # å¤šæœåŠ¡å™¨ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ mcp-server-connection.ts # å•æœåŠ¡å™¨è¿æ¥
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                        # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ cli.ts                   # å‘½ä»¤è¡Œäº¤äº’å·¥å…·
â”‚   â”‚   â”œâ”€â”€ config-loader.ts         # é…ç½®åŠ è½½å™¨
â”‚   â”‚   â””â”€â”€ openai-integration.ts    # OpenAI é›†æˆå·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                        # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts                 # æ‰€æœ‰ç±»å‹å¯¼å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ agent.ts                      # AI ä»£ç†
â”‚   â””â”€â”€ index.ts                      # æ¨¡å—å¯¼å‡º
â”‚
â”œâ”€â”€ app.ts                            # åº”ç”¨å…¥å£
â”œâ”€â”€ config.json                       # MCP æœåŠ¡å™¨é…ç½®
â”œâ”€â”€ .env                              # ç¯å¢ƒå˜é‡ï¼ˆéœ€è‡ªè¡Œåˆ›å»ºï¼‰
â”œâ”€â”€ package.json                      # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json                     # TypeScript é…ç½®
â””â”€â”€ README.md                         # é¡¹ç›®æ–‡æ¡£
```
